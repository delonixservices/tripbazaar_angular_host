<div class="hotel_search-container">
  <!-- it will remain sticky relative to its parent. -->
  <div class="modify_search-container d-none d-md-block">
    <app-hotel-modify-search></app-hotel-modify-search>
  </div>
  <div class="d-flex d-md-none mt-4 mb-3 justify-content-around">
    <button type="button" (click)="openModal(sortAndFilterModal)" class="btn-outline-primary btn btn-sm">Sort and
      Filter</button>
    <button type="button" (click)="openModal(modifySearchModal)" class="btn-outline-danger btn btn-sm"><i
        class="fa fa-search"></i> Modify Search</button>
  </div>
  <div class="container">
    <div class="pt-2 pl-2 pr-2 mt-1 mb-1 bg-light text-dark" *ngIf="allHotel && allHotel.search">
      <div class="row">
        <div class="col">
          <div class="h3">Hotels in {{allHotel.region.city}}</div>
          <p>Showing {{totalHotelsCount}} out of total 1374 properties in {{allHotel.region.city}} | Sort By low to high
          </p>
        </div>
        <!-- <div class="col-md-8 text-center">
          <strong *ngIf="allHotel.region">{{allHotel.region.city}} {{allHotel.region.country}}</strong>
          <p class="small">{{allHotel.search.check_in_date}} - {{allHotel.search.check_out_date}}
            ({{getNoOfNights()}}
            NIGHT<span *ngIf="getNoOfNights() > 1">S</span>) |
            {{allHotel.search.room_count}} ROOM<span *ngIf="allHotel.search.room_count > 1">S</span> |
            {{allHotel.search.adult_count}} ADULT<span *ngIf="allHotel.search.adult_count > 1">S</span> |
            {{allHotel.search.child_count}} <span *ngIf="allHotel.search.child_count <= 1">CHILD</span><span
              *ngIf="allHotel.search.child_count > 1">CHILDREN</span></p>
        </div>
        <div class="col-md-2 mt-2 text-right text-success"><strong>Hotels
            (<span>{{filteredHotels.length}}</span>)</strong></div> -->
        <!-- <div class="col-md-2 text-right">
              <button type="button" (click)="openModal(modifySearchModal)" class="btn-outline-danger btn btn-sm"><i
                  class="fa fa-search"></i> Modify Search</button>
            </div> -->
      </div>
    </div>
    <div class="row">
      <div class="col-md-3 d-none d-md-block">
        <app-hotel-search-filters [minHotelPrice]="minHotelPrice" [maxHotelPrice]="maxHotelPrice"
          (filtersChange)="onFiltersChange($event)"></app-hotel-search-filters>
      </div>
      <div class="col">
        <div class="movies content" id="movies" fjs-items="template=#hotel-template"
          *ngFor="let hotel of filteredHotels; let i = index ">
          <div class="hotel_search-item">
            <div class="row">
              <div class="col-md-5">
                <div class="">

                  <ngb-carousel [showNavigationArrows]="true" [showNavigationIndicators]="false">
                    <ng-template ngbSlide *ngFor="let item of [].constructor(hotel.imageDetails.count); let i = index ">
                      <div class="carousel-img-wrapper">
                        <img class="img-fluid" src="{{hotel.imageDetails.prefix+i+hotel.imageDetails.suffix}}"
                          src-fallback="/assets/images/hotel_placeholder.jpg" alt="hotelSlide">
                      </div>
                      <!-- <div class="carousel-caption">
                          </div> -->
                    </ng-template>
                  </ngb-carousel>

                  <!-- <div id="carouselExampleIndicators{{i}}" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                          <div class="carousel-item "
                            *ngFor="let item of [].constructor(hotel.imageDetails.count); let i = index "
                            [ngClass]="{'active' : i == 0}">
                            <img src="{{hotel.imageDetails.prefix+i+hotel.imageDetails.suffix}}" class="img-fluid"
                              alt="First slide" style="height: 255px;width: 100%;">
                          </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators{{i}}" role="button"
                          data-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                          <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators{{i}}" role="button"
                          data-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                          <span class="sr-only">Next</span>
                        </a>
                      </div> -->
                </div>
                <div *ngIf="hotel.imageDetails.count ===0">
                  <img class="img-fluid" src="/assets/images/hotel_placeholder.jpg" alt="hotelSlide"
                    style="width:100%; height:220px">
                </div>
              </div>

              <div class="col-md-7">
                <div class="hotel-details">
                  <div class="row">
                    <div class="col-7 py-3">
                      <h4>{{hotel.name}}</h4>
                      <div class="rating">
                        <i class="fa fa-star " [ngClass]="{'text-warning' : hotel.starRating > 0 }"></i>
                        <i class="fa fa-star " [ngClass]="{'text-warning' : hotel.starRating > 1 }"></i>
                        <i class="fa fa-star " [ngClass]="{'text-warning' : hotel.starRating > 2 }"></i>
                        <i class="fa fa-star " [ngClass]="{'text-warning' : hotel.starRating > 3 }"></i>
                        <i class="fa fa-star " [ngClass]="{'text-warning' : hotel.starRating > 4 }"></i>
                      </div>
                      <div class="mb-2"><i class="fa fa-map-marker"></i> {{hotel.location.address}},
                        {{allHotel.region.city}} {{allHotel.region.country}}
                      </div>
                      <p><i class="fa fa-bed"></i>
                        {{hotel.rates.packages[0].room_details.description}} </p>

                      <p class="facility">
                        <i class="fa fa-wifi" title="WIFI" *ngIf="hotel.amenities.dataPorts"></i>
                        <i class="fa fa-tv" title="TV" *ngIf="hotel.amenities.tVInRoom"></i>
                        <i class="fa fa-snowflake-o" title="AC" *ngIf="hotel.amenities.airConditioning"></i>
                        <i class="fa fa-bath" title="Private Washroom"></i>
                        <i class="fa fa-car" title="Free parking"></i>
                        <i class="fa fa-cutlery" title="Food"></i>
                        <i class="fa fa-coffee" title="Breakfast"></i>
                        <i class="fa fa-glass" title="Bar" *ngIf="hotel.amenities.miniBarInRoom"></i>
                      </p>
                      <hr>
                      <!-- <div class="text-success"><i class="fa fa-check-circle-o"
                              title="Free Cancellation"></i> Free Cancellation</div> -->
                    </div>

                    <div class="col-5 text-right ">
                      <div class="rating text-success">
                        <i class="fa fa-tripadvisor"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                      </div>
                      <div class="text-right">
                        <span class="small">{{hotel.moreRatings.tripAdvisor.rating}} / 5 Excellent |
                          {{hotel.moreRatings.tripAdvisor.reviewCount}} Reviews</span>
                      </div>

                      <hr>
                      <h4 class="text-right price">

                        <span class="small"
                          *ngIf="hotel.rates.packages[0] && hotel.rates.packages[0].indicative_market_rates">
                          <s *ngIf="hotel.rates.packages[0] && hotel.rates.packages[0].guest_discount_percentage">
                            {{(((-1*hotel.rates.packages[0].guest_discount_percentage)/100) * hotel.rates.packages[0].base_amount)+ hotel.rates.packages[0].base_amount | number: '1.0-0'}}</s></span>

                        <span class="badge badge-success text-light small"
                          *ngIf="hotel.rates.packages[0] && hotel.rates.packages[0].guest_discount_percentage">
                          {{hotel.rates.packages[0].guest_discount_percentage}} % </span> <br>

                        {{hotel.rates.packages[0].chargeable_rate_currency}}.
                        <span>{{hotel.rates.packages[0].base_amount | number: '1.0-0'}}</span>
                      </h4>
                      <hr>
                      <div class="btn btn-danger" (click)="hoteldetails(hotel)">Book Room <i class="fa fa-check"></i>
                      </div>
                      <div class="pt-1"><a (click)="hoteldetails(hotel)" class="">View Details <i
                            class="fa fa-eye"></i></a></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="norecordfoundtitle" class="no-rooms-available">
          <div id="notfound">
            <div class="notfound">
              <div class="notfound-404">
                <!-- <h1>{{norecordfoundmsg}}</h1> -->
                <h2>{{norecordfoundtitle}}</h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #modifySearchModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Modify Search</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-hotel-modify-search (searchClicked)="modal.dismiss()"></app-hotel-modify-search>
  </div>
</ng-template>

<ng-template #sortAndFilterModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Sort and
      Filter</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-hotel-search-filters [minHotelPrice]="minHotelPrice" [maxHotelPrice]="maxHotelPrice"
      (filtersChange)="onFiltersChange($event)"></app-hotel-search-filters>
  </div>
</ng-template>